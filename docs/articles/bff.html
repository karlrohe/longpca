<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="longpca">
<title>Analyzing the CRAN Dependency Graph with longpca • longpca</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyzing the CRAN Dependency Graph with longpca">
<meta property="og:description" content="longpca">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">longpca</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Intro_to_longpca_with_nycflights_data.html">Intro to longpca with nycflights data</a>
    <a class="dropdown-item" href="../articles/bff.html">Analyzing the CRAN Dependency Graph with longpca</a>
    <a class="dropdown-item" href="../articles/parse_text.html">parse_text inside longpca</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/karlrohe/longpca/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Analyzing the CRAN Dependency Graph with longpca</h1>
                        <h4 data-toc-skip class="author">Karl Rohe</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/karlrohe/longpca/blob/HEAD/vignettes/bff.Rmd" class="external-link"><code>vignettes/bff.Rmd</code></a></small>
      <div class="d-none name"><code>bff.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.5</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.5.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.2     </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/karlrohe/longpca" class="external-link">longpca</a></span><span class="op">)</span></span>
<span><span class="co"># This data on CRAN packages is pre-loaded in longpca. It was downloaded in February 2024.  </span></span>
<span><span class="va">all_packages</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20,319 × 17</span></span></span>
<span><span class="co">#&gt;    Package  Version Priority Depends Imports LinkingTo Suggests Enhances License</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> A3       1.0.0   <span style="color: #BB0000;">NA</span>       R (&gt;= … <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        randomF… <span style="color: #BB0000;">NA</span>       GPL (&gt;…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AalenJo… 1.0     <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        knitr, … <span style="color: #BB0000;">NA</span>       GPL (&gt;…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AATtools 0.0.2   <span style="color: #BB0000;">NA</span>       R (&gt;= … magrit… <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>       GPL-3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABACUS   1.0.0   <span style="color: #BB0000;">NA</span>       R (&gt;= … ggplot… <span style="color: #BB0000;">NA</span>        rmarkdo… <span style="color: #BB0000;">NA</span>       GPL-3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> abasequ… 0.1.0   <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>       GPL-3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> abbrevi… 0.1     <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        testtha… <span style="color: #BB0000;">NA</span>       GPL-3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> abc      2.2.1   <span style="color: #BB0000;">NA</span>       R (&gt;= … <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>       GPL (&gt;…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> abc.data 1.0     <span style="color: #BB0000;">NA</span>       R (&gt;= … <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>       GPL (&gt;…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ABC.RAP  0.9.0   <span style="color: #BB0000;">NA</span>       R (&gt;= … graphi… <span style="color: #BB0000;">NA</span>        knitr, … <span style="color: #BB0000;">NA</span>       GPL-3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ABCanal… 1.2.1   <span style="color: #BB0000;">NA</span>       R (&gt;= … plotrix <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>       GPL-3  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20,309 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: License_is_FOSS &lt;chr&gt;, License_restricts_use &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   OS_type &lt;chr&gt;, Archs &lt;chr&gt;, MD5sum &lt;chr&gt;, NeedsCompilation &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   File &lt;chr&gt;, Repository &lt;chr&gt;</span></span></span>
<span></span>
<span><span class="co"># You can download the most recent version in this fashion:</span></span>
<span><span class="co"># all_packages = available.packages() |&gt; as_tibble()</span></span>
<span><span class="co"># if you download fresh data, the specific interpretations below are likely to not be sensible.  </span></span>
<span></span>
<span><span class="va">all_packages</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Package</span>, <span class="va">Imports</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20,319 × 2</span></span></span>
<span><span class="co">#&gt;    Package       Imports                              </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> A3            <span style="color: #BB0000;">NA</span>                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AalenJohansen <span style="color: #BB0000;">NA</span>                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AATtools      magrittr, dplyr, doParallel, foreach </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABACUS        ggplot2 (&gt;= 3.1.0), shiny (&gt;= 1.3.1),</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> abasequence   <span style="color: #BB0000;">NA</span>                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> abbreviate    <span style="color: #BB0000;">NA</span>                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> abc           <span style="color: #BB0000;">NA</span>                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> abc.data      <span style="color: #BB0000;">NA</span>                                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ABC.RAP       graphics, stats, utils               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ABCanalysis   plotrix                              </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20,309 more rows</span></span></span></code></pre></div>
<p>In particular, <code>all_packages</code> contains the
“Imports-dependency-graph” (idg) as a comma separated string. The key
function <code>make_interaction_model</code> has an argument
<code>parse_text</code> that is built for studying document-term
interactions and can easily extract this information:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># in make_interaction_model, the ... arguments go to tidytext::unnest_tokens for the text parsing.  In this case, we do not want to make the words lower case (because package names are case sensitive and that might be important later)</span></span>
<span><span class="va">idg</span> <span class="op">=</span> <span class="fu"><a href="../reference/make_interaction_model.html">make_interaction_model</a></span><span class="op">(</span><span class="va">all_packages</span>,</span>
<span>                             <span class="op">~</span><span class="va">Package</span><span class="op">*</span><span class="va">Imports</span>,</span>
<span>                             parse_text <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                             to_lower <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">idg</span></span>
<span><span class="co">#&gt; $row_universe</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20,319 × 3</span></span></span>
<span><span class="co">#&gt;    Package                n row_num</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Seurat                64       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> tidyverse             60       2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> radiant.data          58       3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> radiant.model         58       4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> SSDM                  55       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> BasketballAnalyzeR    53       6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> tRigon                49       7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AFM                   48       8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> dextergui             48       9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> proteus               48      10</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20,309 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $column_universe</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6,230 × 4</span></span></span>
<span><span class="co">#&gt;    from_text token        n col_num</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Imports   stats     <span style="text-decoration: underline;">5</span>442       1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Imports   utils     <span style="text-decoration: underline;">3</span>423       2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Imports   dplyr     <span style="text-decoration: underline;">3</span>299       3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Imports   methods   <span style="text-decoration: underline;">3</span>210       4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Imports   ggplot2   <span style="text-decoration: underline;">3</span>135       5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Imports   Rcpp      <span style="text-decoration: underline;">2</span>548       6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Imports   rlang     <span style="text-decoration: underline;">2</span>172       7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Imports   graphics  <span style="text-decoration: underline;">2</span>158       8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Imports   magrittr  <span style="text-decoration: underline;">1</span>954       9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Imports   stringr   <span style="text-decoration: underline;">1</span>698      10</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6,220 more rows</span></span></span></code></pre></div>
<p>The <code>$column_universe</code> illustrate how
<code>make_interaction_model</code> has parsed the variable
<code>Imports</code>. There are 20319 “rows” and 6230 “columns”. The
<code>diagnose</code> and <code>pick_dim</code> functions help us
understand how <code>pca</code> might perform:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/diagnose.html">diagnose</a></span><span class="op">(</span><span class="va">idg</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in scale_y_log10(): <span style="color: #00BB00;">log-10</span> transformation introduced</span></span>
<span><span class="co">#&gt; infinite values.</span></span>
<span><span class="co">#&gt; Warning: Removed 11 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_bar()`).</span></span></code></pre></div>
<p><img src="bff_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   measurement     Package `from_text &amp; token`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> number_of_items   <span style="text-decoration: underline;">20</span>319                <span style="text-decoration: underline;">6</span>230</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> average_degree        6                  18</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> median_degree         4                   2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> percent_le_1         29                  43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> percent_le_2         39                  58</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> percent_le_3         48                  66</span></span></code></pre>
<p>Recall that “degree” is the number of interactions a row or column
has. Above, <code>diagnose</code> shows that this graph is very sparse;
the median degrees are in the low single digits. However, we still
expect to be able to detect some signal because in the plots we see that
there are lots of Packages with degree over 10 (i.e. more than
dependencies). The other histogram illustrates the power law degree (the
top of the bins roughly follow a straight line down on the log-log
scale). So, there are lots of packages being imported by over 100 other
packages, and a handful of packages being imported by over 1000.</p>
<p>How many dimensions/PCs should we compute? This number is often
denoted by k. I have multiple competing thoughts/heuristics that might
be useful for you. I think…</p>
<ol style="list-style-type: decimal">
<li>there is very rarely a “true value” of k and so, typically,
discussions that presume a true value fruitless.</li>
<li>the true value of k could be considered as n (the number of rows or
columns) and also, past a certain point, the dimensions cannot be
recovered because they are overcome by noise. So, there might be a
reasonable discussion of “the largest reasonable choice of k”.<br>
</li>
<li>you do not need to set k to be the largest reasonable choice of k.
Some contexts might warrent this, but without more context, there is
nothing bad about picking a smaller k that makes your interpretation
tasks easier. Alternatively, maybe you are looking for a specific signal
and it happens to be one of the first few PCs. All of this is very
reasonable.<br>
</li>
<li>folks might try picking a larger dimension that they would typically
consider… there are often interesting dimensions past the first “gap” or
“elbow”.</li>
</ol>
<p>Built around the intuition in 2) above, we made “cross-validated
eigenvalues” that you can access with the function
<code>pick_dim</code>. Essentially, for each PC dimension, we test the
null hypothesis that the uncovered PC is uncorrelated with any
underlying signal. This requires “post-selection inference” for which we
utilize cross-validation to get Z-scores and p-values for each
dimension:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># eicv = pick_dim(idg, dimMax = 100)</span></span>
<span><span class="co"># plot(eicv)</span></span>
<span><span class="co"># eicv$estimated_dimension</span></span></code></pre></div>
<p>The first insignificant p-value is the 64th. So, the code gives
<code>$estimated_dimension</code> to be 63. However, even after 64,
there are some significant p-values. The first negative Z-score happens
at the 90th dimension. So, the decay to insignificance is slow and I am
certain that there is signal after the 63rd dimension.</p>
<p>For ease of illustration, will proceed with <code>k=11</code>
dimensions. The first 10 Z-scores in <code>eicv</code> seem to be a bit
larger than the rest.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pcs</span> <span class="op">=</span> <span class="fu"><a href="../reference/pca.html">pca</a></span><span class="op">(</span><span class="va">idg</span>, k <span class="op">=</span> <span class="fl">11</span><span class="op">)</span></span>
<span><span class="va">pcs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20,319 × 16</span></span></span>
<span><span class="co">#&gt;    Package     n row_num degree weighted_degree pc_01_rows pc_02_rows pc_03_rows</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Seurat     64       1     64              64       3.84      1.51      -<span style="color: #BB0000;">1.02</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> tidyve…    60       2     58              60       4.16     -<span style="color: #BB0000;">4.21</span>       1.49 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> radian…    58       3     57              58       3.95     -<span style="color: #BB0000;">2.46</span>      -<span style="color: #BB0000;">1.00</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> radian…    58       4     57              58       3.70     -<span style="color: #BB0000;">1.61</span>       0.124</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> SSDM       55       5     55              55       3.10      1.87       0.444</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Basket…    53       6     51              53       3.19      1.21      -<span style="color: #BB0000;">0.571</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> tRigon     49       7     46              49       3.16     -<span style="color: #BB0000;">0.238</span>     -<span style="color: #BB0000;">1.02</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> AFM        48       8     43              48       3.26      1.60       0.104</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> dexter…    48       9     45              48       3.76     -<span style="color: #BB0000;">1.12</span>      -<span style="color: #BB0000;">1.05</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> proteus    48      10     44              48       3.47     -<span style="color: #BB0000;">0.305</span>      2.68 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20,309 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: pc_04_rows &lt;dbl&gt;, pc_05_rows &lt;dbl&gt;, pc_06_rows &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   pc_07_rows &lt;dbl&gt;, pc_08_rows &lt;dbl&gt;, pc_09_rows &lt;dbl&gt;, pc_10_rows &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   pc_11_rows &lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6,230 × 17</span></span></span>
<span><span class="co">#&gt;    from_text token        n col_num degree weighted_degree pc_01_columns</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Imports   stats     <span style="text-decoration: underline;">5</span>442       1   <span style="text-decoration: underline;">5</span>442            <span style="text-decoration: underline;">5</span>442         14.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Imports   utils     <span style="text-decoration: underline;">3</span>423       2   <span style="text-decoration: underline;">3</span>423            <span style="text-decoration: underline;">3</span>423         13.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Imports   dplyr     <span style="text-decoration: underline;">3</span>299       3   <span style="text-decoration: underline;">3</span>299            <span style="text-decoration: underline;">3</span>299         16.8 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Imports   methods   <span style="text-decoration: underline;">3</span>210       4   <span style="text-decoration: underline;">3</span>210            <span style="text-decoration: underline;">3</span>210         12.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Imports   ggplot2   <span style="text-decoration: underline;">3</span>135       5   <span style="text-decoration: underline;">3</span>135            <span style="text-decoration: underline;">3</span>135         14.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Imports   Rcpp      <span style="text-decoration: underline;">2</span>548       6   <span style="text-decoration: underline;">2</span>548            <span style="text-decoration: underline;">2</span>548          8.93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Imports   rlang     <span style="text-decoration: underline;">2</span>172       7   <span style="text-decoration: underline;">2</span>172            <span style="text-decoration: underline;">2</span>172         14.3 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Imports   graphics  <span style="text-decoration: underline;">2</span>158       8   <span style="text-decoration: underline;">2</span>158            <span style="text-decoration: underline;">2</span>158          9.29</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Imports   magrittr  <span style="text-decoration: underline;">1</span>954       9   <span style="text-decoration: underline;">1</span>954            <span style="text-decoration: underline;">1</span>954         13.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Imports   stringr   <span style="text-decoration: underline;">1</span>698      10   <span style="text-decoration: underline;">1</span>698            <span style="text-decoration: underline;">1</span>698         12.3 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6,220 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 10 more variables: pc_02_columns &lt;dbl&gt;, pc_03_columns &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   pc_04_columns &lt;dbl&gt;, pc_05_columns &lt;dbl&gt;, pc_06_columns &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   pc_07_columns &lt;dbl&gt;, pc_08_columns &lt;dbl&gt;, pc_09_columns &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   pc_10_columns &lt;dbl&gt;, pc_11_columns &lt;dbl&gt;</span></span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/streaks.html">streaks</a></span><span class="op">(</span><span class="va">pcs</span>,mode <span class="op">=</span> <span class="st">"rows"</span>,plot_columns <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span></span></code></pre></div>
<p><img src="bff_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># streaks(pcs,mode = "columns",plot_columns = 1:11)</span></span></code></pre></div>
<p>The function <code>streaks</code> makes a pairs plot of the
<code>pcs</code>. Notice that these panels display <a href="https://academic.oup.com/jrsssb/article/85/4/1037/7221295" class="external-link">“radial
streaks”</a>. If we rotate these PCs with Varimax, then perhaps these
streaks will align with the coordinate axes. The function
<code>rotate</code> will rotate both the rows and the column and return
an object that is the same class as <code>pcs</code> (i.e. the class is
<code>pc</code>).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spcs</span> <span class="op">=</span> <span class="fu"><a href="../reference/rotate.html">rotate</a></span><span class="op">(</span><span class="va">pcs</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/streaks.html">streaks</a></span><span class="op">(</span><span class="va">spcs</span>, mode <span class="op">=</span> <span class="st">"rows"</span>, plot_columns <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span></span></code></pre></div>
<p><img src="bff_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/streaks.html">streaks</a></span><span class="op">(</span><span class="va">spcs</span>, mode <span class="op">=</span> <span class="st">"cols"</span>, plot_columns <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span></span></code></pre></div>
<p><img src="bff_files/figure-html/unnamed-chunk-8-2.png" width="700"></p>
<p>Indeed, <code>rotate</code> roughly aligns the streaks to the axes.
So we expect each dimension to align with a meaningful concept or
community within CRAN packages. The alignment isn’t perfect; some
streaks are close to an axis, but not perfecty aligned. This is often a
hint that k could/should be a bigger (something we already know from
<code>pick_dim</code> above).</p>
<p>The <code>row_features</code> and <code>column_features</code> are
scaled within each feature so that the <em>average</em> squared value is
1; the standard linear algebra custom is to define these so that their
<em>sum</em> of squared values is 1. The benefit of the average is that
you can imagine each axis above has a marginal SD of 1. So, the
<code>column_features</code> have much much larger “outliers”; we will
see below that these outliers are packages that are imported by hundreds
or thousands of other packages. The maximum number of packages imported
by another package is 64 by Seurat; tidyverse is second with 58 imports.
This type of asymmetry (row vs column) is common and we will delve more
into the meaning of this asymmetry below.</p>
<p>There are two things that we might do at this point. First, we could
try to interpret what the 11 dimensions (on each
<code>row_feature</code> and <code>column_feature</code>) “represents”…
that is, we could try to interpret them. Alternatively, we might simply
use them to start predicting something of interest. For example, we
might see if these community labels are predictive/associated with the
type of License that a package uses.</p>
<p>If the data source is familiar to you, then the simplest way to
interpret each factor is to examine the largest element. The function
<code>top</code> in <code>longpca</code> makes this easy. The first
argument is your <code>pc</code> object; in this case we will use
<code>spcs</code>. The second argument is the dimension that you wish to
inspect. Let’s inspect the first dimension:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/top.html">top</a></span><span class="op">(</span><span class="va">spcs</span>, this_dim <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; $top_rows</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 18 × 2</span></span></span>
<span><span class="co">#&gt;    Package      vpc_01_rows</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> TOmicsVis           7.86</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> RNAseqQC            6.89</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> MOCHA               6.00</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> CINNA               5.65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> bulkAnalyseR        5.57</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ggpicrust2          5.55</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> MitoHEAR            5.43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> NeuralSens          5.24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> microbial           5.18</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> rcmdcheck          -<span style="color: #BB0000;">3.45</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> blastula           -<span style="color: #BB0000;">3.48</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> learnr             -<span style="color: #BB0000;">3.60</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> dockerfiler        -<span style="color: #BB0000;">3.67</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> workflowr          -<span style="color: #BB0000;">3.67</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> rhub               -<span style="color: #BB0000;">3.69</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> usethis            -<span style="color: #BB0000;">3.79</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> packager           -<span style="color: #BB0000;">3.97</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> shiny              -<span style="color: #BB0000;">4.56</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $top_columns</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 3</span></span></span>
<span><span class="co">#&gt;    from_text token      vpc_01_columns</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Imports   dplyr               26.8 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Imports   tidyr               23.8 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Imports   tibble              20.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Imports   purrr               19.8 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Imports   magrittr            19.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Imports   ggplot2             19.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Imports   rlang               19.0 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Imports   stringr             17.3 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Imports   tidyselect          12.3 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Imports   paradox             -<span style="color: #BB0000;">3.02</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> Imports   graphics            -<span style="color: #BB0000;">3.52</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> Imports   Rcpp                -<span style="color: #BB0000;">3.71</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> Imports   mlr3misc            -<span style="color: #BB0000;">4.15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> Imports   htmltools           -<span style="color: #BB0000;">4.80</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> Imports   R6                  -<span style="color: #BB0000;">5.39</span></span></span></code></pre></div>
<p>When interpreting any dimension for this data, we expect that the
<code>top_columns</code> will be far more coherent because the outliers
are (1) very popular packages that are (2) often imported together.
Roughly speaking, the <code>top_rows</code> are the packages that import
a large number of the <code>top_columns</code> (you could Import 300
different packages and not be popular, but have a very large
<code>row_feature</code>).</p>
<p>For the first dimension, many folks will notice that the positive
elements in the <code>top_columns</code> correspond to some core
packages of the tidyverse; they are all imported by thousands of other
packages. There are also some negative pc values at the bottom. However,
an important clue is that the positive <code>pc</code> outliers are far
more substaintial than the negative <code>pc</code> outliers; so, we
might say it is a <em>one-sided factor</em>. In my experience, one-sided
factors are (1) easier to interpret and (2) more common when you choose
a larger value of <code>k</code> and <code>rotate</code> your
<code>pca</code> output. In one-sided factors, <code>rotate</code>
should make the larger dimension the “positive” dimension.</p>
<p>In one-sided factors, I would not say that the negative elements
“define” this dimension. Instead, they give some contextual clues about
what the very large and positive elements are picking up. In this case,
the negative <code>pc</code> values in <code>$top_columns</code>
correspond to packages that are <em>unlikely to be imported with
tidyverse packages</em>. So, if a package is importing a large number of
tidyverse packages, it does not tend to call <code>graphics</code> or
<code>Rcpp</code> or<code>R6</code>. There are loads of reasons why!
Perhaps there are tidyverse alternatives (<code>ggplot2</code>) or they
solve problems that folks in the tidyverse do not tend to emphasize
(fast low level computation with <code>Rcpp</code>) or they correspond
to stylistic coding choices that are not as popular within the tidyverse
(<code>R6</code>). Whatever the reason, in one-sided factors, the
negative elements do not tend to provide coherent additional meaning.
Instead, they tell you about what folks in this community do not tend to
use.</p>
<p>To my eye, the <code>top_rows</code> do not add to this
interpretation. Instead, I would say that the large and positive
elements build on a great number of tidyverse packages and the large
negative elements are more “programming heavy packages” relying on
packages outside the tidyverse; there is a very clear vibe (to me) and
if this is also apparent to you as well, “Harvest the vibes, yo!” Of
course, you do not need to believe my interpretation to use these
dimensions in your workflow; “it is what it is” (i.e. no interpretation)
can get you a long ways.</p>
<p>Interpreting the first dimension was relatively easy because the
packages are so well know. In some sense, we didn’t need
<code>pca</code> to tell us that the tidyverse is a thing. In my
experience, we tend to learn more from dimensions that are harder to
interpret. For these dimensions, we might need more tools to interpret
them; these tools will help us (1) contextualize the dimension with
additional data and (2) reveal how the dimension is related to the other
dimensions.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/top.html">top</a></span><span class="op">(</span><span class="va">spcs</span>, <span class="fl">9</span><span class="op">)</span></span>
<span><span class="co">#&gt; $top_rows</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 17 × 2</span></span></span>
<span><span class="co">#&gt;    Package            vpc_09_rows</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> tune                     14.2 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> workflowsets             12.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> tidymodels               12.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> tidyclust                11.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> probably                 11.3 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> stacks                   11.3 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> workflows                11.2 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> viruslearner             10.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> modeltime.resample       10.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ptm                      -<span style="color: #BB0000;">3.05</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> RCriteo                  -<span style="color: #BB0000;">3.09</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> genBaRcode               -<span style="color: #BB0000;">3.14</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> PubMedWordcloud          -<span style="color: #BB0000;">3.16</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> qdap                     -<span style="color: #BB0000;">3.21</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> CINNA                    -<span style="color: #BB0000;">3.31</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> wilson                   -<span style="color: #BB0000;">3.50</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> hoardeR                  -<span style="color: #BB0000;">3.69</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $top_columns</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 18 × 3</span></span></span>
<span><span class="co">#&gt;    from_text token        vpc_09_columns</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Imports   cli                   18.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Imports   vctrs                 16.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Imports   glue                  15.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Imports   1.0.0                 14.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Imports   rlang                 13.6 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Imports   1.1.0                 12.8 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Imports   lifecycle             12.8 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Imports   withr                 11.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Imports   1.2.0                 10.2 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Imports   RCurl                 -<span style="color: #BB0000;">6.19</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> Imports   scales                -<span style="color: #BB0000;">6.37</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> Imports   XML                   -<span style="color: #BB0000;">6.78</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> Imports   grid                  -<span style="color: #BB0000;">7.15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> Imports   RColorBrewer          -<span style="color: #BB0000;">7.75</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> Imports   gridExtra             -<span style="color: #BB0000;">8.63</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> Imports   plyr                 -<span style="color: #BB0000;">10.4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> Imports   ggplot2              -<span style="color: #BB0000;">12.2</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> Imports   reshape2             -<span style="color: #BB0000;">12.3</span></span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_packages</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">License</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 160 × 2</span></span></span>
<span><span class="co">#&gt;    License                  n</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> GPL-3                 <span style="text-decoration: underline;">4</span>584</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> MIT + file LICENSE    <span style="text-decoration: underline;">4</span>216</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> GPL (&gt;= 2)            <span style="text-decoration: underline;">4</span>179</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> GPL-2                 <span style="text-decoration: underline;">2</span>380</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> GPL (&gt;= 3)            <span style="text-decoration: underline;">1</span>706</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> GPL                    440</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> GPL-2 | GPL-3          337</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> CC0                    226</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> LGPL-3                 155</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> GPL-3 | file LICENSE   139</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 150 more rows</span></span></span></code></pre></div>
<p>I’m going to presume that there are roughly 6 types of Licenses: GPL,
MIT, CC, Apache, GNU, Other.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_packages</span> <span class="op">&lt;-</span> <span class="va">all_packages</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    GPL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">License</span>, <span class="st">"(GPL|GNU General Public License)"</span><span class="op">)</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    MIT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">License</span>, <span class="st">"MIT"</span><span class="op">)</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    CC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">License</span>, <span class="st">"CC BY"</span><span class="op">)</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    Apache <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">License</span>, <span class="st">"Apache"</span><span class="op">)</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    GNU <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">License</span>, <span class="st">"GNU"</span><span class="op">)</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    <span class="co"># Assuming 'Other' should be TRUE if none of the above conditions are met</span></span>
<span>    Other <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">GPL</span> <span class="op">|</span> <span class="va">MIT</span> <span class="op">|</span> <span class="va">CC</span> <span class="op">|</span> <span class="va">Apache</span> <span class="op">|</span> <span class="va">GNU</span><span class="op">)</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We could use a packages <code>spcs$row_features</code> or
<code>spcs$column_features</code> to predict the type of license that it
uses. In this setting, a package’s <code>row_features</code> describes
how a package chooses to Import other packages and the package’s
<code>column_features</code> describes how other packages choose to
Import it. Said another way, <code>row_features</code> depend upon
things the package gets to choose and <code>column_features</code> are
in some sense a measure of popularity.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_selected</span> <span class="op">=</span> <span class="va">all_packages</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">spcs</span><span class="op">$</span><span class="va">column_features</span> <span class="op">|&gt;</span></span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Package <span class="op">=</span> <span class="va">token</span><span class="op">)</span> , by <span class="op">=</span> <span class="st">"Package"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">spcs</span><span class="op">$</span><span class="va">row_features</span>, by <span class="op">=</span> <span class="st">"Package"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>response <span class="op">=</span> <span class="va">MIT</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"vpc_"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">logistic_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">response</span> <span class="op">~</span> <span class="va">.</span><span class="op">-</span><span class="fl">1</span>, data <span class="op">=</span> <span class="va">data_selected</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</span></span>
<span><span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">logistic_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 22 × 5</span></span></span>
<span><span class="co">#&gt;    term           estimate std.error statistic  p.value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> vpc_01_columns   0.403     0.099<span style="text-decoration: underline;">1</span>      4.07 4.72<span style="color: #949494;">e</span><span style="color: #BB0000;">- 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> vpc_02_columns  -<span style="color: #BB0000;">1.67</span>      0.186      -<span style="color: #BB0000;">8.95</span> 3.50<span style="color: #949494;">e</span><span style="color: #BB0000;">-19</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> vpc_03_columns  -<span style="color: #BB0000;">0.185</span>     0.178      -<span style="color: #BB0000;">1.04</span> 3.00<span style="color: #949494;">e</span><span style="color: #BB0000;">- 1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> vpc_04_columns  -<span style="color: #BB0000;">0.062</span><span style="color: #BB0000; text-decoration: underline;">1</span>    0.036<span style="text-decoration: underline;">8</span>     -<span style="color: #BB0000;">1.69</span> 9.13<span style="color: #949494;">e</span><span style="color: #BB0000;">- 2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> vpc_05_columns  -<span style="color: #BB0000;">2.33</span>      0.235      -<span style="color: #BB0000;">9.90</span> 4.27<span style="color: #949494;">e</span><span style="color: #BB0000;">-23</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> vpc_06_columns   0.169     0.062<span style="text-decoration: underline;">6</span>      2.71 6.76<span style="color: #949494;">e</span><span style="color: #BB0000;">- 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> vpc_07_columns  -<span style="color: #BB0000;">1.30</span>      0.175      -<span style="color: #BB0000;">7.42</span> 1.19<span style="color: #949494;">e</span><span style="color: #BB0000;">-13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> vpc_08_columns   0.224     0.070<span style="text-decoration: underline;">6</span>      3.18 1.48<span style="color: #949494;">e</span><span style="color: #BB0000;">- 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> vpc_09_columns   0.585     0.090<span style="text-decoration: underline;">8</span>      6.45 1.15<span style="color: #949494;">e</span><span style="color: #BB0000;">-10</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> vpc_10_columns  -<span style="color: #BB0000;">0.550</span>     0.120      -<span style="color: #BB0000;">4.56</span> 5.00<span style="color: #949494;">e</span><span style="color: #BB0000;">- 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 12 more rows</span></span></span></code></pre></div>
<p>all_packages |&gt; count(License) |&gt; arrange(desc(n)) all_packages
|&gt; select(License)</p>
<p>I want to mutate 5 new columns in <code>all_packages</code> (a
boolean for each one)</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># # bff should take two objects: (pcs, im)</span></span>
<span><span class="co"># #  the rows of im should align with the rows or columns of pcs.</span></span>
<span><span class="co"># text_im = make_interaction_model(~Imports * (Title &amp; Description &amp; License &amp; Author),</span></span>
<span><span class="co">#                                  tib = top_packages |&gt; mutate(Imports = Package),</span></span>
<span><span class="co">#                                  parse_text = TRUE)</span></span>
<span><span class="co"># text_im2 = make_interaction_model(~Package * (Title &amp; Description &amp; License &amp; Author),</span></span>
<span><span class="co">#                                   tib = top_packages,</span></span>
<span><span class="co">#                                   parse_text = TRUE)</span></span>
<span><span class="co"># bb = bff(spcs, text_im) # defined below.</span></span>
<span><span class="co"># bbb = bff(spcs, text_im2)</span></span>
<span><span class="co"># View(bb)</span></span>
<span><span class="co"># View(bbb)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Rohe Karl.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
